(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=o(e);fetch(e.href,s)}})();function C(t,r,o,i){const e=Math.sin(i),s=Math.cos(i),a=t[r],c=t[o];return{...t,[r]:a*s-c*e,[o]:a*e+c*s}}function B(t,r){return C(t,"x","y",r)}function V(t,r){return C(t,"x","z",r)}function q(t,r){return C(t,"y","z",r)}function U(t,r){return C(t,"x","w",r)}function j(t,r){return C(t,"y","w",r)}function k(t,r){return C(t,"z","w",r)}const H=2*Math.PI,v=124.7354645891,S={xy:3.034538902655*v,xz:5.028469563403*v,yz:7.037635209575*v,xw:11.06479853421*v,yw:13.08750265132*v,zw:17.00573092632*v};function L(t){for(;t>=H;)t-=H;for(;t<0;)t+=H;return t}function Z(t){const r=[],o={xy:0,xz:0,yz:0,xw:0,yw:0,zw:0};for(let i=0;i<t;i+=1){let e={x:1,y:.7,z:.8,w:.9};o.xy=L(o.xy+S.xy),e=B(e,o.xy),o.xz=L(o.xz+S.xz),e=V(e,o.xz),o.yz=L(o.yz+S.yz),e=q(e,o.yz),o.xw=L(o.xw+S.xw),e=U(e,o.xw),o.yw=L(o.yw+S.yw),e=j(e,o.yw),o.zw=L(o.zw+S.zw),e=k(e,o.zw),r.push(e)}return r}function G(t,r,o,i,e){const{stereoHalfAngle:s,pointRadius:a,scaleX:c,palette:f,background:m}=i,h=t.canvas.width,d=t.canvas.height,x=h/2-h/4,p=h/2+h/4,w=Math.sin(s),g=Math.cos(s),M=Math.sin(e),A=Math.cos(e);t.fillStyle=m,t.fillRect(0,0,h,d);for(let y=0;y<r.length;y+=1){const l=r[y];if(l.w*A-l.x*M<0)continue;const E=l.w*M+l.x*A,I=l.z,O=E*g+I*w,R=E*g-I*w,b=O*c+x,_=R*c+p,X=o[y];t.fillStyle=f[y%f.length],t.beginPath(),t.arc(b,X,a,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(_,X,a,0,Math.PI*2),t.fill()}}const Q=1e3,K=.03,J=.15*.5,tt=["#0000aa","#00aa00","#00aaaa","#ffff55"];function ot(t){const r=(()=>{const c=t.getContext("2d");if(!c)throw new Error("Unable to acquire 2D rendering context.");return c})(),o=Z(Q);let i=0,e=[];const s=()=>{const c=t.parentElement;if(c){const h=c.getBoundingClientRect(),d=Math.max(320,Math.floor(h.width)),x=Math.floor(window.innerHeight*.65),p=Math.max(240,Math.min(x,Math.floor(d*(350/640))));t.width=d,t.height=p}else t.width=640,t.height=350;const f=t.height/350*70,m=t.height/2;e=o.map(h=>h.y*f+m)},a=()=>{i+=K,i>=Math.PI*2&&(i-=Math.PI*2);const c=t.width/640*80;t.height/350*70,G(r,o,e,{stereoHalfAngle:J,pointRadius:2,scaleX:c,palette:tt,background:"#000000"},i),requestAnimationFrame(a)};return s(),requestAnimationFrame(a),{resize:s}}const D=.99,F=.61,W=.86,N=.74;function et(){const t=[];for(let r=0;r<2;r++)for(let o=0;o<2;o++)for(let i=0;i<2;i++)for(let e=0;e<2;e++)t.push({x:r===0?D:-D,y:o===0?F:-F,z:i===0?W:-W,w:e===0?N:-N});return t}function n(t,r,o,i){return t*8+r*4+o*2+i}function nt(){return[{from:n(0,0,0,0),to:n(1,0,0,0),color:1},{from:n(0,1,0,0),to:n(1,1,0,0),color:2},{from:n(0,0,1,0),to:n(1,0,1,0),color:3},{from:n(0,1,1,0),to:n(1,1,1,0),color:4},{from:n(0,0,0,1),to:n(1,0,0,1),color:4},{from:n(0,1,0,1),to:n(1,1,0,1),color:3},{from:n(0,0,1,1),to:n(1,0,1,1),color:2},{from:n(0,1,1,1),to:n(1,1,1,1),color:1},{from:n(0,0,0,0),to:n(0,1,0,0),color:5},{from:n(1,0,0,0),to:n(1,1,0,0),color:6},{from:n(0,0,1,0),to:n(0,1,1,0),color:7},{from:n(1,0,1,0),to:n(1,1,1,0),color:7},{from:n(0,0,0,1),to:n(0,1,0,1),color:7},{from:n(1,0,0,1),to:n(1,1,0,1),color:7},{from:n(0,0,1,1),to:n(0,1,1,1),color:6},{from:n(1,0,1,1),to:n(1,1,1,1),color:5},{from:n(0,0,0,0),to:n(0,0,1,0),color:8},{from:n(1,0,0,0),to:n(1,0,1,0),color:9},{from:n(0,1,0,0),to:n(0,1,1,0),color:10},{from:n(1,1,0,0),to:n(1,1,1,0),color:11},{from:n(0,0,0,1),to:n(0,0,1,1),color:11},{from:n(1,0,0,1),to:n(1,0,1,1),color:10},{from:n(0,1,0,1),to:n(0,1,1,1),color:9},{from:n(1,1,0,1),to:n(1,1,1,1),color:8},{from:n(0,0,0,0),to:n(0,0,0,1),color:12},{from:n(1,0,0,0),to:n(1,0,0,1),color:13},{from:n(0,1,0,0),to:n(0,1,0,1),color:14},{from:n(1,1,0,0),to:n(1,1,0,1),color:15},{from:n(0,0,1,0),to:n(0,0,1,1),color:15},{from:n(1,0,1,0),to:n(1,0,1,1),color:14},{from:n(0,1,1,0),to:n(0,1,1,1),color:13},{from:n(1,1,1,0),to:n(1,1,1,1),color:12}]}function rt(t,r){let o={...t};const i=Math.sin(r.xy),e=Math.cos(r.xy),s=o.x*e+o.y*i,a=-o.x*i+o.y*e;o.x=s,o.y=a;const c=Math.sin(r.xz),f=Math.cos(r.xz),m=o.x*f+o.z*c,h=-o.x*c+o.z*f;o.x=m,o.z=h;const d=Math.sin(r.yz),x=Math.cos(r.yz),p=o.y*x+o.z*d,w=-o.y*d+o.z*x;o.y=p,o.z=w;const g=Math.sin(r.xw),M=Math.cos(r.xw),A=o.x*M+o.w*g,y=-o.x*g+o.w*M;o.x=A,o.w=y;const l=Math.sin(r.yw),z=Math.cos(r.yw),E=o.y*z+o.w*l,I=-o.y*l+o.w*z;o.y=E,o.w=I;const O=Math.sin(r.zw),R=Math.cos(r.zw),b=o.z*R+o.w*O,_=-o.z*O+o.w*R;return o.z=b,o.w=_,o}function it(t,r){const o=Math.sin(r),i=Math.cos(r);return{x:t.x*i-t.z*o,z:t.x*o+t.z*i}}function st(t,r,o,i,e){const{stereoHalfAngle:s,scaleX:a,scaleY:c,palette:f,background:m,lineWidth:h}=e,d=t.canvas.width,x=t.canvas.height;t.fillStyle=m,t.fillRect(0,0,d,x);const p=r.map(w=>rt(w,i));for(let w=0;w<2;w++){const g=w===0?d/4:d/4*3,M=x/2,A=w===0?s:-s,y=[];for(const l of p){const z=it({x:l.x,z:l.z},A);y.push({x:z.x*a+g,y:l.y*c+M})}t.lineWidth=h;for(const l of o){const z=y[l.from],E=y[l.to];t.strokeStyle=f[l.color-1]||f[f.length-1],t.beginPath(),t.moveTo(z.x,z.y),t.lineTo(E.x,E.y),t.stroke()}}}const u=2*Math.PI,P=5,T={xy:.0055*P,xz:.0027*P,yz:.0034*P,xw:2e-4*P,yw:.0039*P,zw:.0091*P},ct=.15*.5,at=["#ffffff","#0000aa","#00aa00","#005555","#00aa00","#00aa55","#00aaaa","#00aaff","#aaaa00","#aaaa55","#55ff55","#55ffaa","#55ffff","#ffff55","#ffffff"];function lt(t){const r=(()=>{const c=t.getContext("2d");if(!c)throw new Error("Unable to acquire 2D rendering context.");return c})(),o=et(),i=nt(),e={xy:0,xz:0,yz:0,xw:0,yw:0,zw:0},s=()=>{const c=t.parentElement;if(c){const f=c.getBoundingClientRect(),m=Math.max(320,Math.floor(f.width)),h=Math.floor(window.innerHeight*.65),d=Math.max(240,Math.min(h,Math.floor(m*(350/640))));t.width=m,t.height=d}else t.width=640,t.height=350},a=()=>{e.xy+=T.xy,e.xz+=T.xz,e.yz+=T.yz,e.xw+=T.xw,e.yw+=T.yw,e.zw+=T.zw,e.xy>u&&(e.xy-=u),e.xz>u&&(e.xz-=u),e.yz>u&&(e.yz-=u),e.xw>u&&(e.xw-=u),e.yw>u&&(e.yw-=u),e.zw>u&&(e.zw-=u);const c=t.width/640*80,f=t.height/350*70;st(r,o,i,e,{stereoHalfAngle:ct,scaleX:c,scaleY:f,palette:at,background:"#000000",lineWidth:1.5}),requestAnimationFrame(a)};return s(),requestAnimationFrame(a),{resize:s}}const $={four16:{create:ot,title:"4D Sphere (S³) – W-Gated Stereo",description:"A 4D point cloud on the 3-sphere, with perceptual W-gate hiding half the space."},four01:{create:lt,title:"4D Tesseract – Rotating Hyperrectangle",description:"A 4D rectangular parallelepiped rotating through all six 4D planes."}};function ft(){const t=window.location.hash.slice(1);return t in $?t:null}function ht(){const t=document.getElementById("app");t&&(t.innerHTML=`
    <div class="landing">
      <header class="landing-header">
        <h1>4D Visualisations</h1>
        <p class="subtitle">Reconstructions of Undo Uus's QBasic experiments (1997–2000)</p>
      </header>
      <div class="vis-grid">
        ${Object.entries($).map(([r,o])=>`
          <a href="#${r}" class="vis-card">
            <div class="vis-card-icon">${r==="four16"?"◉":"⬡"}</div>
            <h2>${o.title}</h2>
            <p>${o.description}</p>
          </a>
        `).join("")}
      </div>
      <footer class="landing-footer">
        <p>Original experiments in 4-dimensional perception and stereoscopic rendering.</p>
      </footer>
    </div>
  `)}function dt(t){const r=$[t],o=document.getElementById("app");if(!o||!r)return;o.innerHTML=`
    <div class="container">
      <nav class="vis-nav">
        <a href="#" class="back-link">← All Visualisations</a>
      </nav>
      <h1>${r.title}</h1>
      <p>${r.description}</p>
      <canvas id="canvas"></canvas>
      <footer>Reconstruction of Undo Uus's QBasic experiment (1997–2000).</footer>
    </div>
  `;const i=document.getElementById("canvas");if(!(i instanceof HTMLCanvasElement))throw new Error('Expected a <canvas id="canvas"> element.');const e=r.create(i),s=()=>{var a;return(a=e==null?void 0:e.resize)==null?void 0:a.call(e)};window.addEventListener("resize",s),window.__visCleanup=()=>{window.removeEventListener("resize",s)}}function Y(){const t=window.__visCleanup;t&&(t(),delete window.__visCleanup);const r=ft();r?dt(r):ht()}window.addEventListener("hashchange",Y);Y();
